<app-search-bar
    [functionalityData] = "funcionalityData"></app-search-bar>

<div class="table-responsive">
<table class="table table-hover">
    <thead>
    <tr>
        <th>#</th>
        <th>Nome</th>
        <th>Usuário</th>
        <th>Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let user of pagedUser" (click) = "openUserModal(user)" style="cursor: pointer;">
        <td>{{ user.id }}</td>
        <td>
        <strong>{{ user.name }}</strong>
        </td>
        <td>{{ user.email }}</td>
        <td>
          <button class="btn btn-sm btn-primary me-2" (click)="openUserModal(user)">
            <i class="bi bi-pencil"></i>
          </button>
          <button class="btn btn-sm btn-danger" (click)="deleteUser(user.id); $event.stopPropagation()">
            <i class="bi bi-trash"></i>
          </button>
        </td>
    </tr>
    <tr>
        <td colspan="4" class="text-center">
        <div class="pagination-container">
            <button
            class="pagination-btn"
            (click)="changePage(1)"
            [disabled]="currentPage === 1"
            >
            «
            </button>
            <button
            class="pagination-btn"
            (click)="changePage(currentPage - 1)"
            [disabled]="currentPage === 1"
            >
            ‹
            </button>

            <ng-container
            *ngFor="let page of [].constructor(totalPages); let i = index"
            >
            <button
                class="pagination-btn"
                [class.active]="currentPage === i + 1"
                (click)="changePage(i + 1)"
            >
                {{ i + 1 }}
            </button>
            </ng-container>

            <button
            class="pagination-btn"
            (click)="changePage(currentPage + 1)"
            [disabled]="currentPage === totalPages"
            >
            ›
            </button>
            <button
            class="pagination-btn"
            (click)="changePage(totalPages)"
            [disabled]="currentPage === totalPages"
            >
            »
            </button>
        </div>
        </td>
    </tr>
    </tbody>
</table>
</div>

<div class="table-responsive">
    <table class="table table-hover">
        <thead><tr><th>Meu Usuário</th></tr></thead>
        <tbody></tbody>
    </table>
</div>

<app-details-modal
[functionalityDataModal] = "funcionalityDataModal"
(deleteEvent)="deleteUser($event)">
</app-details-modal>
